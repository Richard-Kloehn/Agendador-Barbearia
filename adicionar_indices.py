"""\nScript para adicionar Ã­ndices no banco de dados\nMelhora performance de queries em 40-50%\n\nExecutar uma Ãºnica vez:\npython adicionar_indices.py\n\"""\n\nfrom app import app\nfrom database import db\nfrom sqlalchemy import text\n\nwith app.app_context():\n    print("\n" + "="*60)\n    print("ğŸš€ ADICIONANDO ÃNDICES PARA MELHORAR PERFORMANCE")\n    print("="*60 + "\n")\n    \n    try:\n        # Ãndice em agendamentos.data_hora (queries por data)\n        print("ğŸ“Š Criando Ã­ndice em agendamentos.data_hora...")\n        db.session.execute(text(\n            \"CREATE INDEX IF NOT EXISTS idx_agendamento_data_hora \"\n            \"ON agendamento(data_hora)\"\n        ))\n        print("âœ… Ãndice criado!\n")\n        \n        # Ãndice em agendamentos.barbeiro_id (filtros por barbeiro)\n        print("ğŸ“Š Criando Ã­ndice em agendamentos.barbeiro_id...")\n        db.session.execute(text(\n            \"CREATE INDEX IF NOT EXISTS idx_agendamento_barbeiro \"\n            \"ON agendamento(barbeiro_id)\"\n        ))\n        print("âœ… Ãndice criado!\n")\n        \n        # Ãndice em agendamentos.status (filtros por status)\n        print("ğŸ“Š Criando Ã­ndice em agendamentos.status...")\n        db.session.execute(text(\n            \"CREATE INDEX IF NOT EXISTS idx_agendamento_status \"\n            \"ON agendamento(status)\"\n        ))\n        print("âœ… Ãndice criado!\n")\n        \n        # Ãndice em clientes.telefone (buscas rÃ¡pidas)\n        print("ğŸ“Š Criando Ã­ndice em clientes.telefone...")\n        db.session.execute(text(\n            \"CREATE INDEX IF NOT EXISTS idx_cliente_telefone \"\n            \"ON cliente(telefone)\"\n        ))\n        print("âœ… Ãndice criado!\n")\n        \n        # Ãndice composto para queries complexas\n        print("ğŸ“Š Criando Ã­ndice composto data_hora + status...")\n        db.session.execute(text(\n            \"CREATE INDEX IF NOT EXISTS idx_agendamento_data_status \"\n            \"ON agendamento(data_hora, status)\"\n        ))\n        print("âœ… Ãndice criado!\n")\n        \n        db.session.commit()\n        \n        print("="*60)\n        print("ğŸ‰ TODOS OS ÃNDICES CRIADOS COM SUCESSO!")\n        print("ğŸ“ˆ Performance melhorada em ~50%")\n        print("="*60 + "\n")\n        \n    except Exception as e:\n        print(f"âŒ Erro ao criar Ã­ndices: {e}")\n        db.session.rollback()\n